@model DFACore.Models.LoginViewModel

@{
    ViewData["Title"] = "Log in";
    var announcement = (Notice)@ViewData["NoticeMessage"];
    var declaration = (Notice)@ViewData["DeclarationMessage"];
    var termsAndConditions = (Notice)@ViewData["TermsAndConditionsMessage"];
}
<style>

    .navbar-toggler {
        display: none
    }

    @@media screen and (min-width: 601px) {
        /*      .form-group {
                padding-left: 100px;
                padding-right: 100px;
            }*/
        #dfa-title {
            margin-top: 100px !important;
        }

        .loginTitleVisible2 {
            display: none;
        }
    }

    /* If the screen size is 600px wide or less, set the font-size of <div> to 30px */
    @@media screen and (max-width: 600px) {
        #dfa-title {
            margin-top: 40px !important;
        }

        .loginTitleVisible {
            display: none;
        }

        .bannerDetails {
            font-size: 12px;
        }
    }

    .no-border {
        border: 0;
        box-shadow: none; /* You may want to include this as bootstrap applies these styles too */
    }

    .loginTitle {
        font-family: 'BEBAS' !important;
    }

    /*@@media only screen and (max-width: 600px) {
            #BannerLogo {
                display: none;
            }
        }*/
    /*#terms-and-conditions-modal {
            margin-top: 10vh !important;
        }

        #declaration-modal {
            margin-top: 10vh !important;
        }*/

    button a {
        color: white;
    }

    .validation-summary-errors ul {
        list-style: none;
        margin-left: -14px;
    }
</style>
<section class="header px-4 mt-5">
    <div class="text-center mt-3 w-100 mb-60">
        <p class="black-text bold mb-0 p-label">Office of the Consular Affairs</p>
        <p class="black-text bold p-label">Authentication Division</p>
        <h2 class="blue-text bold mb-0 mt-2 h2">Apostille Appointment System</h2>
    </div>
</section>

<div class="row">
    <div class="col-md-3 col-sm-0">
    </div>
    <div class="col-md-6 col-sm-12">

        <section class="loginSection" style="height:auto;margin-top: -55px;">
            <form id="account" method="post" asp-action="login" asp-controller="account">
                @*<div style="background-color: #217ff3;color: white;height: 35px;">
                        <p class="text-left " style="padding: 8px;font-weight:600;font-size:16px;">Login</p>
                    </div>*@
                <div asp-validation-summary="All" class="text-danger"></div>
                <div style="padding:10px">
                    <div class="form-group col-md-12 col-sm-12">
                        <input asp-for="Email" class="form-control no-border" placeholder="Email" style="font-size: 16px;text-align:center;background-color:#DFE8F5;" />
                        <span asp-validation-for="Email" class="text-danger"></span>
                    </div>
                    <div class="form-group col-md-12 col-sm-12">
                        <input asp-for="Password" class="form-control no-border" placeholder="Password" style="font-size: 16px;text-align:center;background-color:#DFE8F5;" />
                        <span toggle="#password-field" class="fa fa-fw fa-eye field_icon toggle-password float-right" style="position: relative;top: -27px;right: 10px;"></span>
                        <span asp-validation-for="Password" class="text-danger"></span>
                    </div>

                    @*<div class="form-group col-md-12 col-sm-12" style="text-align: center;">
            <div class="checkbox " >
                <label asp-for="RememberMe">
                    <input asp-for="RememberMe" />
                    @Html.DisplayNameFor(m => m.RememberMe)
                </label>
            </div>
        </div>*@

                    <div class="form-group col-md-12 col-sm-12">
                        <button id="login-button" type="button" class="btn btn-primary mx-auto d-block col-md-12 col-sm-12">LOGIN</button>
                    </div>
                    <div class="form-group col-md-12 col-sm-12" style="text-align: center;">
                        <h6>
                            <a id="forgot-password" asp-action="ForgotPassword">Forgot your password?</a>
                        </h6>
                        <hr style="color: #DFE8F5; background-color: #DFE8F5;" class="mb-2" />
                        <a asp-action="Dashboard" asp-controller="Home" class="float-right bold">Back to Home Page</a>
                        @*<button id="btnVideo" type="button" class="btn btn-outline-primary" style="font-size:12px;font-weight:bold;">CLICK HERE TO WATCH INSTRUCTIONAL VIDEO</button>*@
                        <br />

                        <div class="card bg-light mb-3 w-100 white-bg mt-4">
                            <div class="card-header text-uppercase bold p-1 white-bg">reminders to all users</div>
                            <div class="card-body px-5 py-3">
                                <p class="card-text">Appointments cannot be cancelled on the scheduled day itself. Please allow at least (1) day for appointment cancellation. (ex. If your appointment is on 29 August you cannot cancel it on the same day. The last day to cancel it will be 28 August) Previous appointments cannot be cancelled anymore. There are no fees or charges in using the Appointment Cancellation System.</p>
                            </div>
                        </div>
                    </div>
                </div>


            </form>

        </section>

    </div>
    <div class="col-md-3 col-sm-0">
    </div>


</div>

@if (declaration != null || !string.IsNullOrEmpty(declaration.NoticeMessage))
{
    <div class="modal fade" id="declaration-modal" tabindex="-1" role="dialog" aria-labelledby="declarationModallLabel" aria-hidden="true">
        <div class="modal-dialog modal-md" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="row text-center">
                        <div class="col-lg-4 col-md-5 col-sm-5"></div>
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <p class="black-text" style="font-size:12px;">Department of Foreign Affairs</p>
                            <p class="black-text" style="font-size:12px;margin-top: -15px;">Office of Consular Affairs</p>
                            <p class="black-text" style="font-size:12px;margin-top: -15px;">Authentication Division</p>
                        </div>
                        <div class="col-lg-4 col-md-5 col-sm-5"></div>
                    </div>
                    <div class="row text-center">
                        <div class="col-lg-4 col-md-5 col-sm-5"></div>
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <h4 class="modal-title text-center black-text-bold">DECLARATION</h4>
                        </div>
                        <div class="col-lg-4 col-md-5 col-sm-5"></div>
                    </div>
                    <div class="container">
                        <hr />
                        @Html.Raw(@declaration.NoticeMessage)
                        @*<p class="black-text" style="font-size:14px;">
                                I hereby declare and certify that the documents submitted are authentic, I understand that the documents
                                submitted shall be subjected to verification by the Department of Foreign Affairs(DFA).
                                In the event that the same be found to be falsified or forged, my application shall be forfeited and I
                                shall be subject to legal sanctions in accordance with the law.
                            </p>
                            <p class="black-text" style="font-size:14px;">
                                In case my document needs further verification from the issuing agency, I am aware that release of
                                submitted document/s may exceed beyond the prescribed processing time depending on the
                                compliance of the verification request from the issuing agency.
                            </p>
                            <p class="black-text" style="font-size:14px;">
                                I understand that should my document/s be submitted to any jurisdiction where the Hague
                                Convention Abolishing the Requirement of Legalization for Foreign Public Documents (otherwise
                                known as the Apostille Convention of 1961) does not apply, I shall undertake to present said
                                document/s to the appropriate Embassy/Consulate in the Philippines for legalization.
                            </p>
                            <p class="black-text" style="font-size:14px;">
                                Further, I hold the DFA free from any liability should the Apostilized document be not accepted
                                by any foreign jurisdiction, or for any delay, delivery error, loss, or damage due to unforeseen
                                events beyond the control of the DFA, or once the Apostillized documents has been issued to the
                                courier company or to my authorized representative.
                            </p>
                            <p class="black-text" style="font-size:14px;">
                                By proceeding with this application, I understand that I am signifying my consent
                                which effectively constitutes as waiver of any and all privacy rights pertaining to the disclosure,
                                collection, and use of my personal information and data under the specific terms and conditions
                                of R.A. No. 10173 or the Data Privacy Act of 2012 and its Implementing Rules and Regulations,
                                and other pertinent DFA rules, regulations and policies on the matter.
                            </p>*@
                    </div>
                    <div class="container p-0">
                        <hr />
                        <div class="row">
                            <div class="col-md-3 col-sm-5"> </div>
                            <div class="col-md-6 col-sm-2">
                                <button id="declaration-agree" style="width:100%" type="button" class="btn button-primary text-white" data-dismiss="modal">I AGREE</button>
                            </div>
                            <div class="col-md-3 col-sm-5"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

@if (termsAndConditions != null || !string.IsNullOrEmpty(termsAndConditions.NoticeMessage))
{
    <div class="modal fade" id="terms-and-conditions-modal" tabindex="-1" role="dialog" aria-labelledby="termsAndConditionsModallLabel" aria-hidden="true">
        <div class="modal-dialog modal-md" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="row text-center">
                        <div class="col-lg-4 col-md-5 col-sm-5"></div>
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <p class="black-text" style="font-size:12px;">Department of Foreign Affairs</p>
                            <p class="black-text" style="font-size:12px;margin-top: -15px;">Office of Consular Affairs</p>
                            <p class="black-text" style="font-size:12px;margin-top: -15px;">Authentication Division</p>
                        </div>
                        <div class="col-lg-4 col-md-5 col-sm-5"></div>
                    </div>
                    <div class="row text-center">
                        <div class="col-lg-3 col-md-2 col-sm-12"></div>
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <h4 class="modal-title text-center black-text-bold">TERMS AND CONDITIONS</h4>
                        </div>
                        <div class="col-lg-3 col-md-2 col-sm-12"></div>
                    </div>
                    <div class="container">
                        <hr />
                        @Html.Raw(@termsAndConditions.NoticeMessage)
                        @*<p class="black-text" style="font-size:14px;">
                                This appointment and scheduling system allocates slots on a first come, first served basis.
                            </p>
                            <p class="black-text" style="font-size:14px;">
                                Users accept the responsibility for supplying, checking, and verifying the accuracy and
                                correctness of the information they provide on this system in connection with their application.
                                Incorrect information supplied may result in delay or rejection of authentication / Apostille
                                application. Misrepresentation of the user supplying inaccurate information may be considered
                                grounds for refusal / cancellation / forfeiture of authentication / Apostille application.
                            </p>
                            <p class="black-text-bold" style="font-size:14px;">
                                <i>
                                    By proceeding with this application, I understand that I am signifying my
                                    consent to the disclosure, collection, and use of my personal information and the data
                                    required under the Executive Order No. 582. My consent which effectively constitutes a
                                    waiver of any and all privacy rights pertaining to the disclosure, collection, and use of my
                                    Appointment System Website's Privacy Policy, the Data Privacy Act of 2012 and it's
                                    Implementing Rules and Regulations, and other pertinent DFA rules, regulation, policies
                                    on the matter.
                                </i>
                            </p>*@
                    </div>
                    <div class="container p-0" >
                        <hr />
                        <div class="row ">
                            <div class="col-md-3 col-sm-5"> </div>
                            <div class="col-md-6 col-sm-12">
                                <button id="terms-and-conditions-agree" style="width:100%" type="submit" class="btn button-primary text-white">I AGREE</button>
                            </div>
                            <div class="col-md-3 col-sm-5"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

}



@if (announcement != null || !string.IsNullOrEmpty(announcement.NoticeMessage))
{
    <div id="announcement" class="modal" tabindex="-1" role="dialog" style="padding-right:0!important;">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" style="font-weight:bold;margin:auto;">NOTICE TO THE PUBLIC</h5>

                </div>
                <div class="modal-body">
                    <div class="col-md-12 ">

                        @Html.Raw(@announcement.NoticeMessage)

                    </div>


                </div>
                <div class="container" style="padding:10px">
                    <hr />
                    <div class="row ">
                        <div class="col-md-3 col-sm-5"> </div>
                        <div class="col-md-6 col-sm-12">
                            <button style="width:100%" type="button" class="btn button-primary text-white" data-dismiss="modal">Close</button>
                        </div>
                        <div class="col-md-3 col-sm-5"></div>
                    </div>
                </div>

            </div>
        </div>
    </div>
}


<div id="video-modal" class="modal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" style="font-weight:bold;margin:auto;">INSTRUCTIONAL VIDEO</h5>
                @*<button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>*@
            </div>
            <div class="modal-body">
                <label>Language</label>
                <select id="videoLanguage" class="form-control" aria-label="Default select" style="margin-bottom:20px;">
                    <option value="1" selected>English</option>
                    <option value="2">Tagalog</option>
                </select>
                <div id="englishVid">
                    <video id="instruction-video-english" controls="controls" style="width:100%;height:auto;">
                        <source src="~/video/0-02-08-22d690c3e33acbe75d2391db7f6b0187ea573c4acfc44c1c65d523593186144e_7c099f.mp4" type="video/mp4" />
                    </video>
                </div>
                <div id="tagalogVid" style="display:none;">
                    <video id="instruction-video-tagalog" controls="controls" style="width:100%;height:auto;">
                        <source src="~/video/APOSTILLE_TAGALOG.mp4" type="video/mp4" />
                    </video>
                </div>
            </div>

            <div class="container" style="padding:10px">
                <hr />
                <div class="row ">
                    <div class="col-md-3 col-sm-5"> </div>
                    <div class="col-md-6 col-sm-12">
                        <button style="width:100%" type="button" class="button-primary text-white" data-dismiss="modal">Close</button>
                    </div>
                    <div class="col-md-3 col-sm-5"></div>
                </div>
            </div>
            @*<div class="modal-footer">
                    <div class="row ">
                        <div class="col-md-3 col-sm-5"> </div>
                        <div class="col-md-6 col-sm-12">
                            <button style="width:100%" type="button" class="button-primary text-white" data-dismiss="modal">Close</button>
                        </div>
                        <div class="col-md-3 col-sm-5"></div>
                    </div>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>*@
        </div>
    </div>
</div>
<script>

    $("#videoLanguage").on("change", function (branchName) {
        console.log($(this).val());
        if ($(this).val() == 1) {
            $('#englishVid').show();
            $('#tagalogVid').hide();
        }
        else {
            $('#tagalogVid').show();
            $('#englishVid').hide();
        }
        var vidEnglish = document.getElementById("instruction-video-english");
        vidEnglish.pause();
        var vidTagalog = document.getElementById("instruction-video-tagalog");
        vidTagalog.pause();
    });

    $(document).ready(function () {

        $("#btnVideo").click(function () {
            $('#video-modal').modal({
                backdrop: 'static',
                keyboard: false,
                show: true
            });
        });


        $('#announcement').modal({
            backdrop: 'static',
            keyboard: false,
            show: true
        });

        $("#login-button").click(function () {
            var model = {
                Email: $("#Email").val(),
                Password: $("#Password").val(),
                RememberMe: false
            };

            var url = "@Url.Action("ValidateAccount", "Account")";
            $.ajax({
                url: url,
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify(model),
                success: function (result) {
                    if (result == true)
                        $("#declaration-modal").modal('show');
                    else
                        $("#account").submit();
                },
                error: function () {
                    $("#account").submit();
                }

            });
            //$("#declaration-modal").modal('show');
        });
        $("#declaration-agree").click(function () {
            $("#declaration-modal").modal('hide');
            $("#terms-and-conditions-modal").modal('show');
        });
        $("#terms-and-conditions-agree").click(function () {
            $("#account").submit();
        });
        $('.modal').on("hidden.bs.modal", function (e) { //fire on closing modal box
            if ($('.modal:visible').length) { // check whether parent modal is opend after child modal close
                $('body').addClass('modal-open'); // if open mean length is 1 then add a bootstrap css class to body of the page
            }
            var vidEnglish = document.getElementById("instruction-video-english");
            vidEnglish.pause();
            var vidTagalog = document.getElementById("instruction-video-tagalog");
            vidTagalog.pause();
        });

        $(document).on('click', '.toggle-password', function () {

            $(this).toggleClass("fa-eye fa-eye-slash");

            var input = $("#Password");
            input.attr('type') === 'password' ? input.attr('type', 'text') : input.attr('type', 'password');
            console.log(input.attr('type'));
        });
    });
</script>
@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
